<!DOCTYPE html>
<html lang="pt-BR">
<head link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#10b981">>
  <meta charset="UTF-8" />
  <title>Check Prato Elite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js");
  }
</script>
      margin:0; font-family: Arial, sans-serif; background:#020617; color:#f8fafc; }
    header { padding:14px; text-align:center; border-bottom:1px solid #1e293b; font-weight:700; }
    main { padding:16px; padding-bottom:76px; }
    .card { background:#0f172a; border-radius:12px; padding:16px; margin-bottom:14px; border:1px solid #1e293b; }
    .row { display:flex; gap:10px; }
    .row > div { flex:1; }
    label { display:block; font-size:13px; opacity:.9; margin:10px 0 6px; }
    input, select, textarea {
      width:100%; padding:12px; border-radius:10px; border:1px solid #334155;
      background:#020617; color:#f8fafc; outline:none;
    }
    textarea { min-height: 86px; resize: vertical; }
    input::placeholder, textarea::placeholder { color:#64748b; }
    button.action {
      width:100%; padding:12px; background:#10b981; border:none; border-radius:10px;
      font-size:15px; font-weight:700; margin-top:12px; cursor:pointer;
    }
    button.secondary {
      width:100%; padding:12px; background:#1e293b; border:1px solid #334155; border-radius:10px;
      font-size:15px; font-weight:700; margin-top:10px; cursor:pointer; color:#f8fafc;
    }
    .hint { font-size:12px; opacity:.75; margin-top:8px; line-height: 1.35; }
    .status { margin-top:12px; font-size:13px; opacity:.95; }
    nav { display:flex; background:#0f172a; border-top:1px solid #1e293b; position:fixed; bottom:0; width:100%; }
    nav button { flex:1; padding:12px 8px; background:none; border:none; color:#cbd5f5; font-size:12px; }
    nav button.active { color:#10b981; font-weight:800; }
    .hidden { display:none; }
    .pill { display:inline-block; padding:6px 10px; border-radius:999px; background:#1e293b; border:1px solid #334155; font-size:12px; margin:6px 6px 0 0; }
    .checkgrid { display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:8px; }
    .check { display:flex; gap:8px; align-items:flex-start; background:#020617; border:1px solid #334155; padding:10px; border-radius:10px; }
    .check input { width:auto; margin-top:2px; }
    .danger { color:#fca5a5; }
  </style>
</head>

<body>
<header>üçΩÔ∏è Check Prato Elite</header>

<main>

  <!-- ABA: CADASTRO -->
  <section id="cadastro">
    <div class="card">
      <h2 style="margin:0 0 6px;">Cadastro & Sa√∫de</h2>
      <div class="hint">
        Essas informa√ß√µes ser√£o usadas para personalizar sugest√µes de dieta/treino e (no futuro) a an√°lise do prato por foto.
        <br><b class="danger">Importante:</b> este app n√£o substitui m√©dico ou nutricionista.
      </div>

      <label>Nome</label>
      <input id="nome" placeholder="Ex: Jonatan" />

      <div class="row">
        <div>
          <label>Idade</label>
          <input id="idade" type="number" placeholder="Ex: 28" />
        </div>
        <div>
          <label>Sexo</label>
          <select id="sexo">
            <option value="">Selecione</option>
            <option>Masculino</option>
            <option>Feminino</option>
            <option>Outro</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Peso (kg)</label>
          <input id="peso" type="number" step="0.1" placeholder="Ex: 78.5" />
        </div>
        <div>
          <label>Altura (cm)</label>
          <input id="altura" type="number" placeholder="Ex: 175" />
        </div>
      </div>

      <label>Objetivo</label>
      <select id="objetivo">
        <option value="">Selecione</option>
        <option>Emagrecer</option>
        <option>Ganhar massa</option>
        <option>Manter peso</option>
        <option>Melhorar sa√∫de</option>
      </select>

      <label>N√≠vel de atividade</label>
      <select id="atividade">
        <option value="">Selecione</option>
        <option>Sedent√°rio</option>
        <option>Leve (1-2x/semana)</option>
        <option>Moderado (3-4x/semana)</option>
        <option>Intenso (5x+/semana)</option>
      </select>

      <label>N√≠vel de treino</label>
      <select id="nivelTreino">
        <option value="">Selecione</option>
        <option>Iniciante</option>
        <option>Intermedi√°rio</option>
        <option>Avan√ßado</option>
      </select>

      <label>Qual esporte voc√™ prefere?</label>
      <select id="esporte">
        <option value="">Selecione</option>
        <option>Muscula√ß√£o</option>
        <option>Futebol</option>
        <option>Corrida</option>
        <option>Crossfit</option>
        <option>Ciclismo</option>
        <option>Nata√ß√£o</option>
        <option>Outro</option>
      </select>

      <label>Horas de sono por dia (m√©dia)</label>
      <select id="sono">
        <option value="">Selecione</option>
        <option>Menos de 5h</option>
        <option>5-6h</option>
        <option>7-8h</option>
        <option>Mais de 8h</option>
      </select>

      <label>Restri√ß√µes / Prefer√™ncias alimentares</label>
      <select id="restricao">
        <option value="">Selecione</option>
        <option>Nenhuma</option>
        <option>Vegetariano</option>
        <option>Vegano</option>
        <option>Intoler√¢ncia √† lactose</option>
        <option>Gl√∫ten</option>
        <option>Diabetes</option>
        <option>Hipertens√£o</option>
      </select>

      <label>Condi√ß√µes de sa√∫de (marque se tiver)</label>
      <div class="checkgrid">
        <div class="check"><input type="checkbox" id="c_diabetes"><div><b>Diabetes</b><div class="hint">Controle de a√ß√∫car/carboidratos</div></div></div>
        <div class="check"><input type="checkbox" id="c_pressao"><div><b>Press√£o alta</b><div class="hint">Controle de s√≥dio</div></div></div>
        <div class="check"><input type="checkbox" id="c_colesterol"><div><b>Colesterol alto</b><div class="hint">Gorduras/qualidade</div></div></div>
        <div class="check"><input type="checkbox" id="c_gastrite"><div><b>Gastrite/Refluxo</b><div class="hint">Evitar irritantes</div></div></div>
        <div class="check"><input type="checkbox" id="c_rim"><div><b>Rins</b><div class="hint">Aten√ß√£o prote√≠na/s√≥dio</div></div></div>
        <div class="check"><input type="checkbox" id="c_alergia"><div><b>Alergias</b><div class="hint">Informe abaixo</div></div></div>
      </div>

      <label>Medicamentos (opcional)</label>
      <input id="meds" placeholder="Ex: metformina, anti-hipertensivo..." />

      <label>Les√µes ou limita√ß√µes (opcional)</label>
      <input id="lesoes" placeholder="Ex: dor no joelho, lombar..." />

      <label>Observa√ß√µes (opcional)</label>
      <textarea id="obs" placeholder="Ex: alergia a amendoim, n√£o como peixe, hor√°rios de trabalho..."></textarea>

      <div class="check" style="margin-top:12px;">
        <input type="checkbox" id="termo" />
        <div>
          <b>Eu entendo o termo</b>
          <div class="hint">As sugest√µes s√£o informativas e n√£o substituem orienta√ß√£o profissional.</div>
        </div>
      </div>

      <button class="action" onclick="salvarPerfil()">Salvar perfil</button>
      <button class="secondary" onclick="limparPerfil()">Limpar</button>

      <div class="status" id="statusCadastro"></div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px;">Seu perfil (salvo no aparelho)</h3>
      <div id="perfilResumo" class="hint">Ainda n√£o salvo.</div>
      <div id="perfilPills"></div>
    </div>
  </section>

  <!-- ABA: PRATO -->
  <section id="prato" class="hidden">
    <div class="card">
      <h2 style="margin:0 0 6px;">üì∏ Analisar Prato</h2>
      <div class="hint">Simula√ß√£o por enquanto. Depois entra IA e foto/galeria real.</div>
      <button class="action" onclick="analisarPrato()">Tirar foto / Galeria</button>
      <div class="status" id="resultadoPrato"></div>
    </div>
  </section>

  <!-- ABA: DIETAS -->
  <section id="dietas" class="hidden">
    <div class="card">
      <h2 style="margin:0 0 6px;">ü•ó Dietas</h2>
      <div class="hint">Sugest√µes baseadas no seu cadastro (simula√ß√£o).</div>
      <button class="action" onclick="gerarDieta()">Gerar dieta sugerida</button>
      <button class="secondary" onclick="gerarDieta(true)">Nova dieta</button>
      <div class="status" id="resultadoDieta"></div>
    </div>
  </section>

  <!-- ABA: TREINOS -->
  <section id="treinos" class="hidden">
    <div class="card">
      <h2 style="margin:0 0 6px;">üèãÔ∏è Treinos</h2>
      <div class="hint">Vamos personalizar pelo seu esporte e n√≠vel.</div>
      <button class="action" onclick="abrirVideoSugestoes()">Ver treinos no YouTube</button>
      <div class="status" id="statusTreinos"></div>
    </div>
  </section>

  <!-- ABA: LOJA -->
  <section id="loja" class="hidden">
    <div class="card">
      <h2 style="margin:0 0 6px;">üõí Loja</h2>
      <div class="hint">Links para p√°ginas oficiais.</div>
      <button class="action" onclick="abrirLink('https://www.gsuplementos.com.br')">Suplementos</button>
      <button class="action" onclick="abrirLink('https://www.nike.com.br')">Vestu√°rio</button>
    </div>
  </section>

  <!-- ABA: PREMIUM -->
  <section id="premium" class="hidden">
    <div class="card">
      <h2 style="margin:0 0 6px;">‚≠ê Premium & Convites</h2>
      <p style="margin:8px 0 0; opacity:.9;">Premium desbloqueia planos completos, hist√≥rico e an√°lises mais detalhadas.</p>
      <button class="action" onclick="alert('Em breve: assinatura Premium ‚úÖ')">Tornar-se Premium</button>
      <button class="secondary" onclick="copiarLink()">Copiar link de convite</button>
      <div class="status" id="statusPremium"></div>
    </div>
  </section>

</main>

<nav>
  <button class="active" onclick="mostrar('cadastro', this)">Cadastro</button>
  <button onclick="mostrar('prato', this)">Prato</button>
  <button onclick="mostrar('dietas', this)">Dietas</button>
  <button onclick="mostrar('treinos', this)">Treinos</button>
  <button onclick="mostrar('loja', this)">Loja</button>
  <button onclick="mostrar('premium', this)">Premium</button>
</nav>

<script>
  function mostrar(id, btn) {
    document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  const KEY = "checkprato_perfil_v2";

  function getPerfil() {
    try { return JSON.parse(localStorage.getItem(KEY) || "null"); } catch { return null; }
  }
  function setPerfil(p) { localStorage.setItem(KEY, JSON.stringify(p)); }

  function salvarPerfil() {
    const termoOk = document.getElementById("termo").checked;
    if (!termoOk) {
      document.getElementById("statusCadastro").innerText =
        "‚ö†Ô∏è Voc√™ precisa aceitar o termo para salvar.";
      return;
    }

    const p = {
      nome: document.getElementById("nome").value.trim(),
      idade: Number(document.getElementById("idade").value),
      sexo: document.getElementById("sexo").value,
      peso: Number(document.getElementById("peso").value),
      altura: Number(document.getElementById("altura").value),
      objetivo: document.getElementById("objetivo").value,
      atividade: document.getElementById("atividade").value,
      nivelTreino: document.getElementById("nivelTreino").value,
      esporte: document.getElementById("esporte").value,
      sono: document.getElementById("sono").value,
      restricao: document.getElementById("restricao").value,
      condicoes: {
        diabetes: document.getElementById("c_diabetes").checked,
        pressao: document.getElementById("c_pressao").checked,
        colesterol: document.getElementById("c_colesterol").checked,
        gastrite: document.getElementById("c_gastrite").checked,
        rim: document.getElementById("c_rim").checked,
        alergia: document.getElementById("c_alergia").checked
      },
      medicamentos: document.getElementById("meds").value.trim(),
      lesoes: document.getElementById("lesoes").value.trim(),
      obs: document.getElementById("obs").value.trim()
    };

    // valida√ß√£o b√°sica
    if (!p.nome || !p.idade || !p.peso || !p.altura || !p.objetivo) {
      document.getElementById("statusCadastro").innerText =
        "‚ö†Ô∏è Preencha: Nome, Idade, Peso, Altura e Objetivo.";
      return;
    }

    setPerfil(p);
    document.getElementById("statusCadastro").innerText = "‚úÖ Perfil completo salvo!";
    renderPerfil();
  }

  function limparPerfil() {
    localStorage.removeItem(KEY);
    document.getElementById("statusCadastro").innerText = "üßπ Perfil removido.";
    document.getElementById("perfilResumo").innerText = "Ainda n√£o salvo.";
    document.getElementById("perfilPills").innerHTML = "";
  }

  function renderPerfil() {
    const p = getPerfil();
    if (!p) return;

    const imc = (p.peso && p.altura) ? (p.peso / ((p.altura/100) ** 2)) : null;
    const imcTxt = imc ? `IMC ~ ${imc.toFixed(1)}` : "";

    const conds = [];
    if (p.condicoes?.diabetes) conds.push("Diabetes");
    if (p.condicoes?.pressao) conds.push("Press√£o alta");
    if (p.condicoes?.colesterol) conds.push("Colesterol alto");
    if (p.condicoes?.gastrite) conds.push("Gastrite");
    if (p.condicoes?.rim) conds.push("Rins");
    if (p.condicoes?.alergia) conds.push("Alergias");

    document.getElementById("perfilResumo").innerText =
      `Ol√°, ${p.nome}. Objetivo: ${p.objetivo}. ${imcTxt}${conds.length ? " | Condi√ß√µes: " + conds.join(", ") : ""}`.trim();

    const pills = [];
    pills.push(`${p.idade} anos`, `${p.peso} kg`, `${p.altura} cm`);
    if (p.atividade) pills.push(p.atividade);
    if (p.nivelTreino) pills.push(p.nivelTreino);
    if (p.esporte) pills.push(p.esporte);
    if (p.sono) pills.push(`Sono: ${p.sono}`);
    if (p.restricao) pills.push(p.restricao);

    document.getElementById("perfilPills").innerHTML =
      pills.filter(Boolean).map(t => `<span class="pill">${t}</span>`).join("");
  }

  function analisarPrato() {
    const p = getPerfil();
    const out = document.getElementById("resultadoPrato");
    if (!p) { out.innerText = "‚ö†Ô∏è Fa√ßa o cadastro primeiro."; return; }

    let base = 650;
    if (p.objetivo === "Emagrecer") base = 520;
    if (p.objetivo === "Ganhar massa") base = 780;

    // ajuste simples por condi√ß√£o (exemplo)
    if (p.condicoes?.diabetes) base -= 30;
    if (p.condicoes?.pressao) base -= 20;

    out.innerText = `üçõ Simula√ß√£o: ~${base} kcal para seu perfil (${p.objetivo}).`;
  }

  function gerarDieta(nova=false) {
    const p = getPerfil();
    const out = document.getElementById("resultadoDieta");
    if (!p) { out.innerText = "‚ö†Ô∏è Fa√ßa o cadastro primeiro."; return; }

    const emag = [
      "Caf√©: ovos + fruta | Almo√ßo: frango + salada | Jantar: peixe + legumes",
      "Caf√©: iogurte + aveia | Almo√ßo: carne magra + arroz integral | Jantar: omelete + salada",
      "Caf√©: tapioca + queijo | Almo√ßo: frango + legumes | Jantar: sopa de legumes"
    ];
    const massa = [
      "Caf√©: ovos + p√£o | Almo√ßo: arroz + feij√£o + carne | Jantar: macarr√£o + frango",
      "Caf√©: vitamina (banana+aveia) | Almo√ßo: frango + batata doce | Jantar: carne + arroz",
      "Caf√©: iogurte + granola | Almo√ßo: peixe + arroz | Jantar: omelete + batata"
    ];
    const manter = [
      "Caf√©: fruta + ovos | Almo√ßo: prato equilibrado | Jantar: prote√≠na + legumes",
      "Caf√©: iogurte + fruta | Almo√ßo: arroz+feij√£o+carne | Jantar: salada + frango",
      "Caf√©: p√£o + queijo | Almo√ßo: macarr√£o + carne | Jantar: sopa + sandu√≠che leve"
    ];

    let lista = manter;
    if (p.objetivo === "Emagrecer") lista = emag;
    if (p.objetivo === "Ganhar massa") lista = massa;

    let aviso = "";
    if (p.condicoes?.pressao) aviso += " ‚ö†Ô∏è Reduzir s√≥dio.";
    if (p.condicoes?.diabetes) aviso += " ‚ö†Ô∏è Aten√ß√£o carboidratos.";
    if (p.restricao && p.restricao !== "Nenhuma") aviso += ` ‚ö†Ô∏è Respeitar: ${p.restricao}.`;

    out.innerText = `${nova ? "üîÅ " : ""}Dieta sugerida: ${lista[Math.floor(Math.random()*lista.length)]}${aviso}`;
  }

  function abrirVideoSugestoes() {
    const p = getPerfil();
    const status = document.getElementById("statusTreinos");
    if (!p || !p.esporte) {
      status.innerText = "‚ö†Ô∏è Cadastre seu esporte preferido para sugest√µes melhores.";
    } else {
      status.innerText = `‚úÖ Abrindo treinos de ${p.esporte} (${p.nivelTreino || "n√≠vel"}) no YouTube...`;
    }
    const q = encodeURIComponent(`treino ${p?.esporte || "muscula√ß√£o"} ${p?.nivelTreino || "iniciante"}`);
    window.open(`https://www.youtube.com/results?search_query=${q}`, "_blank");
  }

  function abrirLink(url) { window.open(url, "_blank"); }

  function copiarLink() {
    const status = document.getElementById("statusPremium");
    const link = window.location.href;
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(link);
      status.innerText = "üîó Link copiado! Envie para seus amigos.";
    } else {
      status.innerText = "‚ö†Ô∏è N√£o foi poss√≠vel copiar automaticamente. Copie o link manualmente.";
    }
  }

  renderPerfil();
</script>

</body>
</html>
